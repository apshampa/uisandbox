<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Revanth Mahankali - Portfolio</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;300;400;600;700;900&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <script src='https://unpkg.com/veloxi@0.6.1/dist/veloxi.min.js'></script>

    <style>
        /* --- Base Variables & Styles --- */
        :root {
            /* Shared */
            --text-color-light: #ffffff;
            --app-icon-size: 60px;
            --app-grid-gap: 20px;

            /* Desktop UI Colors */
            --desktop-bg-url: url('https://512pixels.net/wp-content/uploads/2022/06/13-Ventura-Light-thumb-1500x1500.jpg');
            --top-bar-bg: rgba(255, 255, 255, 0.1);
            --window-bg: #2d2d2d;
            --window-header-bg: #3c3c3c;
            --folder-label-bg: rgba(0, 0, 0, 0.3);
            --folder-label-bg-selected: #007bff;
            --selection-border-color: rgba(0, 123, 255, 0.5);
            --menu-bg: rgba(40, 40, 40, 0.7);
            --menu-hover-bg: #007bff;
            --menu-separator: #555;
            --dock-bg: rgba(60, 60, 60, 0.3);

            /* Mobile UI Colors */
            --mobile-bg-url: url('https://i.postimg.cc/cJzYB7jZ/Deep-Purple-i-Phone-14-Stock-Pro-Wallpaper-iphone-11-pro-2.jpg');
            --iphone-screen-bg: transparent;
            --app-label-color: #fff;
            --fullscreen-app-bg: #f0f0f0;
        }

        *, *:before, *:after { margin: 0; padding: 0; box-sizing: border-box; }
        
        html { font-size: 16px; height: 100%; }

        body {
            font-family: 'Inter', 'Poppins', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #000;
            color: var(--text-color-light);
            height: 100vh;
            overflow: hidden;
            user-select: none;
        }

        /* --- View Containers --- */
        #desktop-view {
            width: 100%;
            height: 100%;
            background-image: var(--desktop-bg-url);
            background-size: cover; background-position: center;
            position: relative;
            display: none; /* Hidden by default, shown via CSS */
        }
        #mobile-view {
            width: 100%;
            height: 100%;
            display: none; /* Hidden by default, shown via CSS */
        }

        /* =============================================================== */
        /* DESKTOP STYLES (macOS)                     */
        /* =============================================================== */
        
        /* --- Top Menu Bar --- */
        #top-bar {
            position: fixed; top: 0; left: 0; width: 100%; height: 28px;
            background: var(--top-bar-bg); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            z-index: 150; display: flex; align-items: center; padding: 0 15px;
            font-size: 14px; font-weight: 500;
        }
        .top-bar-menu { display: flex; align-items: center; gap: 15px; height: 100%; }
        .menu-item { position: relative; padding: 4px 8px; border-radius: 4px; cursor: pointer; display: flex; align-items: center; }
        .menu-item:hover { background-color: rgba(255,255,255,0.2); }
        .menu-item .dropdown { display: none; position: absolute; top: 100%; left: 0; background: var(--menu-bg); backdrop-filter: blur(10px); border-radius: 6px; padding: 5px; list-style: none; min-width: 220px; border: 1px solid rgba(255,255,255,0.1); box-shadow: 0 5px 15px rgba(0,0,0,0.3); }
        .menu-item:hover .dropdown { display: block; }
        .dropdown li { padding: 5px 10px; border-radius: 4px; }
        .dropdown li:hover { background-color: var(--menu-hover-bg); }
        .dropdown li.separator { height: 1px; background: var(--menu-separator); margin: 5px 0; padding: 0; }
        .top-bar-right { margin-left: auto; display: flex; align-items: center; gap: 15px; }
        #top-left-logo { height: 24px; width: auto; display: block; }
        #top-left-logo path { fill: none; stroke: white; stroke-width: 2.5; stroke-linecap: round; stroke-linejoin: round; }

        /* --- Desktop Icons --- */
        #desktop-icons {
            position: absolute; top: 40px; left: 10px; right: 10px; bottom: 100px;
            padding: 20px; display: flex; flex-direction: column; flex-wrap: wrap;
            align-content: flex-start; gap: var(--app-grid-gap);
        }
        .desktop-icon {
            display: flex; flex-direction: column; align-items: center;
            width: 80px; text-align: center; cursor: pointer;
            border-radius: 5px; border: 2px solid transparent; padding: 5px; z-index: 1;
        }
        .desktop-icon.selected { border-color: var(--selection-border-color); background: var(--folder-label-bg-selected); }
        .desktop-icon .icon-image { width: var(--app-icon-size); height: var(--app-icon-size); margin-bottom: 5px; pointer-events: none; }
        .desktop-icon .label { font-size: 13px; color: white; background: var(--folder-label-bg); padding: 2px 6px; border-radius: 3px; word-wrap: break-word; pointer-events: none; text-shadow: 1px 1px 2px rgba(0,0,0,0.5); }
        .desktop-icon.selected .label { background: none; }

        /* --- Window CSS --- */
        .window {
            position: absolute; width: 80vw; height: 80vh; max-width: 1200px; min-width: 300px; min-height: 200px;
            background: var(--window-bg); border-radius: 12px; box-shadow: 0 20px 50px rgba(0,0,0,0.4);
            display: flex; flex-direction: column; opacity: 0; transform-origin: center;
            transition: opacity 0.3s ease, transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            resize: both; overflow: hidden; border: 1px solid rgba(255, 255, 255, 0.1); z-index: 50;
        }
        .window.opening { animation: zoomIn 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        .window.closing { animation: zoomOut 0.3s cubic-bezier(0.4, 0, 0.2, 1) forwards; }
        @keyframes zoomIn { from { opacity: 0; transform: scale(0.3); } to { opacity: 1; transform: scale(1); } }
        @keyframes zoomOut { from { opacity: 1; transform: scale(1); } to { opacity: 0; transform: scale(0.3); } }
        .window-header { height: 35px; background: var(--window-header-bg); display: flex; align-items: center; padding: 0 10px; cursor: move; flex-shrink: 0; }
        .window-controls { display: flex; gap: 8px; }
        .control-btn { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; }
        .control-btn.close { background: #ff5f57; }
        .control-btn.minimize { background: #ffbd2e; }
        .control-btn.maximize { background: #28c940; }
        .window-title { color: #e0e0e0; margin: 0 auto; font-size: 14px; font-weight: 500; }
        .window-body { flex-grow: 1; padding: 0; background: #1e1e1e; border-bottom-left-radius: 12px; border-bottom-right-radius: 12px; overflow: hidden; }
        .window-body iframe { width: 100%; height: 100%; border: none; }

        /* --- Dock CSS --- */
        .macos-dock { position: fixed; bottom: 8px; left: 50%; transform: translateX(-50%); border: 1px solid rgba(255, 255, 255, 0.15); border-radius: 20px; padding: 6px; height: 68px; display: flex; align-items: flex-end; justify-content: center; background: var(--dock-bg); backdrop-filter: blur(20px) saturate(180%); -webkit-backdrop-filter: blur(20px) saturate(180%); z-index: 110; }
        .items { display: flex; align-items: flex-end; justify-content: center; gap: 0 12px; height: 100%; }
        .dock-item, a.dock-item { width: 52px; height: 52px; display: flex; align-items: center; justify-content: center; cursor: pointer; top: 0; position: relative; transition: transform 0.2s ease, filter 0.2s ease; text-decoration: none; color: inherit; }
        .dock-item:hover { filter: brightness(1.1); }
        .dock-item::before { content: attr(data-tooltip); display: block; position: absolute; top: -32px; font-size: 12px; font-weight: 500; border-radius: 6px; color: #e0e0e0; background: rgba(30, 30, 30, 0.8); backdrop-filter: blur(5px); padding: 4px 10px; opacity: 0; pointer-events: none; transition: 0.15s ease-out opacity; white-space: nowrap; }
        .dock-item:hover::before { opacity: 1; }
        .dock-item > svg { width: 100%; height: 100%; object-fit: contain; filter: drop-shadow(0px 4px 6px rgba(0,0,0,0.3)); }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 20% { transform: translateY(-15px); } 40% { transform: translateY(0); } 60% { transform: translateY(-7px); } 80% { transform: translateY(0); } }
        .bouncing { animation: bounce 1s ease; }
        .dock-separator { width: 1px; height: 48px; background-color: rgba(255, 255, 255, 0.2); margin: 0 8px; align-self: center; }

        /* =============================================================== */
        /* MOBILE STYLES (iPhone)                    */
        /* =============================================================== */

        .iphone-screen {
            background-color: var(--iphone-screen-bg);
            background-image: var(--mobile-bg-url);
            background-size: cover;
            background-position: center;
            width: 100%;
            height: 100dvh;
            position: relative;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .status-bar {
            display: none;
        }

        #app-grid {
            padding: 40px 20px 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: var(--app-grid-gap);
            justify-items: center;
            flex-grow: 1;
        
    overflow-y: auto;
    min-height: 0;
    flex-grow: 1;
}

        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            cursor: pointer;
            width: 100%;
        }

        .app-icon .icon-image {
            width: var(--app-icon-size);
            height: var(--app-icon-size);
            border-radius: 15px; /* iOS style rounded corners */
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin-bottom: 8px;
            background-color: white; /* Fallback for SVGs */
        }
        
        .app-icon .icon-image svg{
            width: 100%;
            height: 100%;
        }

        .app-icon .label {
            font-size: 12px;
            color: var(--app-label-color);
            text-shadow: 1px 1px 1px rgba(0,0,0,0.2);
            font-weight: 500;
            word-wrap: break-word;
        }

        .mobile-dock {
            padding: 10px;
            margin: 0 15px 10px;
            background: rgba(25, 25, 25, 0.5);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            justify-items: center;
        
    flex-shrink: 0;
    max-height: 80px;
}
        
        .home-bar {
            width: 134px;
            height: 5px;
            background: white;
            border-radius: 10px;
            position: absolute;
            bottom: 8px;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0.8;
        
    flex-shrink: 0;
    margin-top: 8px;
}
        
        /* --- Fullscreen App View (Mobile) --- */
        .fullscreen-app-view {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--fullscreen-app-bg);
            z-index: 200;
            display: flex;
            flex-direction: column;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .fullscreen-app-view.open {
            transform: translateY(0);
        }
        .app-header {
            height: 44px;
            background: #f8f8f8;
            border-bottom: 1px solid #ddd;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 10px;
            flex-shrink: 0;
        }
        .app-header .close-app-btn {
            font-size: 16px;
            color: #007aff;
            cursor: pointer;
            font-weight: 500;
            background: none;
            border: none;
            padding: 5px;
        }
        .app-header .app-title {
            font-size: 17px;
            font-weight: 600;
            color: #000;
        }
        .app-content {
            flex-grow: 1;
        }
        .app-content iframe {
            width: 100%;
            height: 100%;
            border: none;
        }


        /* --- Responsive Breakpoint --- */
        @media (min-width: 769px) {
            #desktop-view { display: block; }
            #mobile-view { display: none; }
        }

        @media (max-width: 768px) {
            #desktop-view { display: none; }
            #mobile-view { display: block; }
        }

    </style>
</head>
<body>

    <!-- Desktop View Container -->
    <div id="desktop-view">
        <div id="top-bar">
             <div class="top-bar-menu">
                <div class="menu-item">
                     <svg id="top-left-logo" viewBox="0 0 48.9 60" xmlns="http://www.w3.org/2000/svg">
                         <path d="M5.4,3.3v48.4"/><path d="M8,28.3s13.4-1.8,17.9,2.8c3.8,3.8,11.8,16.7,14.3,20.9"/><path d="M9,3.3s12.1-1.9,21.6,0.5c10.8,2.7,12.7,17.2,3.4,22.7"/><path d="M4.2,51.1l1.2,0.4l1.2-0.4c-0.5,0.5-0.9,1.4-1.2,2.1c-0.3-0.7-0.7-1.6-1.2-2.1Z"/><path d="M41,53.2c-0.6-0.5-1.4-1-2.1-1.2l1.2-0.3l0.8-1c-0.1,0.7,0,1.7,0.1,2.4Z"/><path d="M32.6,27.2c0.5-0.6,1.1-1.4,1.3-2.1l0.2,1.2l0.9,0.8c-0.7-0.2-1.7-0.1-2.4,0Z"/>
                    </svg>
                     <ul class="dropdown">
                        <li id="go-to-portfolio">Go to Portfolio Website</li>
                    </ul>
                </div>
                <div class="menu-item"><b>File</b><ul class="dropdown"><li>New Window</li><li class="separator"></li><li>Close Window</li></ul></div>
                <div class="menu-item"><b>Edit</b><ul class="dropdown"><li>Undo</li><li>Redo</li><li class="separator"></li><li>Cut</li><li>Copy</li><li>Paste</li></ul></div>
                <div class="menu-item"><b>View</b><ul class="dropdown"><li>As Icons</li><li>As List</li></ul></div>
             </div>
             <div class="top-bar-right"><div id="clock"></div></div>
        </div>
        <div id="desktop-icons"></div>
        <div class="macos-dock" data-vel-plugin="MacOsDock" data-vel-view="root">
            <div class="items" id="dock-items-container"></div>
        </div>
    </div>

    <!-- Mobile View Container -->
    <div id="mobile-view">
        <div class="iphone-screen">
            <div id="app-grid"></div>
            <div class="mobile-dock" id="mobile-dock-container"></div>
            <div class="home-bar"></div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', () => {

        // =================================================================
        //  EASY EDIT SECTION: ADD YOUR PROJECTS AND ICONS HERE
        // =================================================================

        const ICONS = {
            'folder': `<svg class="icon-image" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 80"><path d="M1,20.53a9.23,9.23,0,0,1,9.22-9.22H33.49a6.15,6.15,0,0,1,4.8,2.23L43.43,21a3.08,3.08,0,0,0,2.4,1.12H89.78A9.23,9.23,0,0,1,99,31.34V69.78A9.23,9.23,0,0,1,89.78,79H10.22A9.23,9.23,0,0,1,1,69.78Z" fill="#79bbff" stroke="#428eff" stroke-miterlimit="10" stroke-width="2"/><path d="M1,27.53a9.23,9.23,0,0,1,9.22-9.22H89.78A9.23,9.23,0,0,1,99,27.53V69.78A9.23,9.23,0,0,1,89.78,79H10.22A9.23,9.23,0,0,1,1,69.78Z" fill="#aadeff" stroke="#428eff" stroke-miterlimit="10" stroke-width="2"/></svg>`,
            'photos': `<svg class="icon-image" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="28" fill="white"/><g transform="translate(32,32)"><path d="M0-24 A24 24 0 0 1 20.78 12 L0 0Z" fill="#ff4b4b"/><path d="M20.78 12 A24 24 0 0 1 -20.78 12 L0 0Z" fill="#ffca18"/><path d="M-20.78 12 A24 24 0 0 1 -20.78 -12 L0 0Z" fill="#45d153"/><path d="M-20.78 -12 A24 24 0 0 1 0 -24 L0 0Z" fill="#3498db"/></g></svg>`,
            'halftone': `<svg class="icon-image" viewBox="0 0 448 448" xmlns="http://www.w3.org/2000/svg"><path fill="black" d="M329.23,119.63C299.08,24.62,195.27-24.9,102.2,14.44,57.15,33.48,20.47,74.98,7.23,122.07c-25.03,89.02,25.18,179.6,112.4,207.16-3.77-15.35-7.77-31.25-6.55-47.15l51.11,51.07c12.59.99,25.23-1.48,37.53-3.92l-84.27-84.72c-1.63-3.02,5.75-24.13,7-24.43l101.78,100.88c3.28,1.42,17.38-7.56,21.5-9.04l6.38-4.93-114.44-114.4c-1.02-1.01-.86-1.86-.46-3.1s11.28-16.57,12.31-16.56l121.39,121.36c4.62-5,10.37-8.8,14.86-13.94,1.23-1.41,5.96-6.54,5.28-7.86l-120.12-121.38,16.63-11.84,1.68-.02,115.63,114.85c1.51-.26,7.51-11.98,8.55-14.21,1.44-3.08,5.92-11.8,4.66-14.54l-100.88-101.32c4.93-1.06,20.46-8.38,24.42-6.58l84.73,84.29c2.29-12.63,4.7-25.51,3.05-38.41l-47.16-47.15-2.16-3.51c16-.24,31.77,3.06,47.16,6.97Z"/></svg>`,
        };

        const projects = [
            { name: "Halftone", url: "https://apshampa.github.io/halftone/", icon: 'halftone' },
            { name: "Portfolio", url: "https://portfoliorevanth.framer.website/projects", icon: 'folder', target: '_self' },
            { name: "Color Gen", url: "https://apshampa.github.io/Color-generator/", icon: 'photos' }
        ];

        const dockApps = [
            { name: 'Finder', id: 'finder-icon', icon: `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M48.5,48.5A24,24,0,0,1,15.5,15.5" fill="none" stroke="#34c7f9" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/><path d="M15.5,48.5A24,24,0,0,0,48.5,15.5" fill="none" stroke="#34c7f9" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/><path d="M48.5,48.5A24,24,0,0,0,15.5,15.5" fill="none" stroke="#1292e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/><path d="M15.5,48.5A24,24,0,0,1,48.5,15.5" fill="none" stroke="#1292e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="5"/><path d="M32,59A27,27,0,1,1,59,32,27,27,0,0,1,32,59ZM32,7A25,25,0,1,0,57,32,25,25,0,0,0,32,7Z" fill="#1292e5"/><path d="M32,57A25,25,0,1,1,57,32,25,25,0,0,1,32,57Z" fill="#34c7f9"/><path d="M48.5,48.5A24,24,0,0,1,15.5,15.5" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.5"/><path d="M15.5,48.5A24,24,0,0,0,48.5,15.5" fill="none" stroke="#fff" stroke-linecap="round" stroke-linejoin="round" stroke-width="0.5"/><circle cx="22" cy="26" r="4" fill="#122d42"/><circle cx="42" cy="26" r="4" fill="#122d42"/><path d="M24,43a10,10,0,0,0,16,0" fill="none" stroke="#122d42" stroke-linecap="round" stroke-width="3"/></svg>` },
            { name: 'Portfolio', icon: `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="4" width="56" height="56" rx="14" fill="white"/><g transform="scale(0.85) translate(8, 6)"><path d="M5.4,3.3v48.4" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"/><path d="M8,28.3s13.4-1.8,17.9,2.8c3.8,3.8,11.8,16.7,14.3,20.9" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"/><path d="M9,3.3s12.1-1.9,21.6,0.5c10.8,2.7,12.7,17.2,3.4,22.7" stroke="black" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" fill="none"/><path d="M4.2,51.1l1.2,0.4l1.2-0.4c-0.5,0.5-0.9,1.4-1.2,2.1c-0.3-0.7-0.7-1.6-1.2-2.1Z" stroke="black" stroke-width="1" fill="black"/><path d="M41,53.2c-0.6-0.5-1.4-1-2.1-1.2l1.2-0.3l0.8-1c-0.1,0.7,0,1.7,0.1,2.4Z" stroke="black" stroke-width="1" fill="black"/><path d="M32.6,27.2c0.5-0.6,1.1-1.4,1.3-2.1l0.2,1.2l0.9,0.8c-0.7-0.2-1.7-0.1-2.4,0Z" stroke="black" stroke-width="1" fill="black"/></g></svg>`, url: 'https://portfoliorevanth.framer.website/' },
            { name: 'Mail', icon: `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="12" width="56" height="40" rx="8" fill="#3498db"/><path d="M4,20 l28,20 l28,-20" fill="none" stroke="#ecf0f1" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/><path d="M56,16 L32,36 L8,16" fill="none" stroke="rgba(255,255,255,0.5)" stroke-width="2" stroke-linecap="round"/></svg>`, url: 'https://portfoliorevanth.framer.website/contact' },
            { name: 'Photos', icon: `<svg class="icon-image" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><circle cx="32" cy="32" r="28" fill="white"/><g transform="translate(32,32)"><path d="M0-24 A24 24 0 0 1 20.78 12 L0 0Z" fill="#ff4b4b"/><path d="M20.78 12 A24 24 0 0 1 -20.78 12 L0 0Z" fill="#ffca18"/><path d="M-20.78 12 A24 24 0 0 1 -20.78 -12 L0 0Z" fill="#45d153"/><path d="M-20.78 -12 A24 24 0 0 1 0 -24 L0 0Z" fill="#3498db"/></g></svg>` },
            { name: 'Reminders', icon: `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><rect x="4" y="4" width="56" height="56" rx="12" fill="#2c2c2e"/><g stroke="white" stroke-width="3" stroke-linecap="round"><path d="M18 20h28"/><path d="M18 32h28"/><path d="M18 44h18"/></g><g fill="white"><circle cx="12" cy="20" r="2.5"/><circle cx="12" cy="32" r="2.5"/><circle cx="12" cy="44" r="2.5"/></g></svg>` },
            { name: 'Trash', icon: `<svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg"><path d="M20 20 V 58 H 44 V 20 Z" fill="#e0e0e0" stroke="#c0c0c0" stroke-width="2"/><path d="M14 20 H 50" fill="none" stroke="#c0c0c0" stroke-width="3" stroke-linecap="round"/><path d="M28 12 H 36 V 20 H 28 Z" fill="#e0e0e0" stroke="#c0c0c0" stroke-width="2" rx="2"/></svg>`, isSeparator: true }
        ];

        const mobileDockApps = [
            { name: 'Portfolio', icon: dockApps[1].icon, url: dockApps[1].url, target: '_self' },
            { name: 'Mail', icon: dockApps[2].icon, url: dockApps[2].url },
            { name: 'Photos', icon: dockApps[3].icon },
            { name: 'Reminders', icon: dockApps[4].icon },
        ];
        
        // =================================================================
        //  CORE LOGIC
        // =================================================================

        // --- Desktop UI Logic ---
        function initDesktop() {
            const clockElement = document.getElementById('clock');
            const desktopIconsContainer = document.getElementById('desktop-icons');
            const dockItemsContainer = document.getElementById('dock-items-container');
            
            // Live Clock
            function updateDesktopClock() {
                if (!clockElement) return;
                const now = new Date();
                const options = { weekday: 'short', month: 'short', day: 'numeric', hour: '2-digit', minute: '2-digit' };
                clockElement.textContent = now.toLocaleDateString('en-US', options).replace(',', '');
            }
            updateDesktopClock();
            setInterval(updateDesktopClock, 1000 * 30);

            // Populate Desktop Folders
            desktopIconsContainer.innerHTML = '';
            projects.forEach(project => {
                const iconEl = document.createElement('div');
                iconEl.className = 'desktop-icon';
                iconEl.dataset.url = project.url;
                iconEl.dataset.title = project.name;
                iconEl.innerHTML = `${ICONS[project.icon] || ICONS['folder']}<span class="label">${project.name}</span>`;
                desktopIconsContainer.appendChild(iconEl);
                
                makeIconDraggable(iconEl);

                iconEl.addEventListener('click', e => {
                    e.stopPropagation();
                    if (!e.currentTarget.classList.contains('dragging')) {
                        document.querySelectorAll('.desktop-icon.selected').forEach(sel => sel.classList.remove('selected'));
                        iconEl.classList.add('selected');
                    }
                });
                iconEl.addEventListener('dblclick', () => {
                    if (!iconEl.classList.contains('dragging')) openWindow(iconEl);
                });
            });
            document.getElementById('desktop-view').addEventListener('click', () => {
                document.querySelectorAll('.desktop-icon.selected').forEach(sel => sel.classList.remove('selected'));
            });

            // Populate Dock
            dockItemsContainer.innerHTML = '';
            dockApps.forEach(app => {
                if (app.isSeparator) {
                    dockItemsContainer.appendChild(document.createElement('div')).className = 'dock-separator';
                    return;
                }
                let dockItem = app.url ? document.createElement('a') : document.createElement('div');
                if (app.url) {
                    dockItem.href = app.url;
                    dockItem.target = '_blank';
                    dockItem.rel = 'noopener noreferrer';
                }
                dockItem.className = 'dock-item';
                if (app.id) dockItem.id = app.id;
                dockItem.setAttribute('data-vel-view', 'item');
                dockItem.setAttribute('data-tooltip', app.name);
                dockItem.innerHTML = app.icon;
                dockItemsContainer.appendChild(dockItem);
            });
            
            initVeloxiDock();

            document.getElementById('go-to-portfolio').addEventListener('click', () => window.open('https://portfoliorevanth.framer.website/', '_blank'));
        }

        // --- Mobile UI Logic ---
        function initMobile() {
            const appGrid = document.getElementById('app-grid');
            const mobileDockContainer = document.getElementById('mobile-dock-container');

            // Populate App Grid
            appGrid.innerHTML = '';
            projects.forEach(project => {
                const iconEl = document.createElement('div');
                iconEl.className = 'app-icon';
                iconEl.innerHTML = `<div class="icon-image">${ICONS[project.icon] || ICONS['folder']}</div><span class="label">${project.name}</span>`;
                
                if (project.target === '_self') {
                    iconEl.addEventListener('click', () => {
                        window.location.href = project.url;
                    });
                } else {
                    iconEl.addEventListener('click', () => openAppView(project));
                }

                appGrid.appendChild(iconEl);
            });
            
            // Populate Mobile Dock
            mobileDockContainer.innerHTML = '';
            mobileDockApps.forEach(app => {
                const iconEl = document.createElement('div');
                iconEl.className = 'app-icon';
                iconEl.innerHTML = `<div class="icon-image">${app.icon}</div>`;
                if (app.url) {
                    if (app.target === '_self') {
                        iconEl.addEventListener('click', () => {
                            window.location.href = app.url;
                        });
                    } else {
                        iconEl.addEventListener('click', () => openAppView(app));
                    }
                }
                mobileDockContainer.appendChild(iconEl);
            });
        }
        
        // --- Window/App Management ---
        let highestZIndex = 50;
        function openWindow(iconElement) {
            const finderIcon = document.getElementById('finder-icon');
            if (finderIcon) {
                finderIcon.classList.add('bouncing');
                finderIcon.addEventListener('animationend', () => finderIcon.classList.remove('bouncing'), { once: true });
            }
            
            setTimeout(() => {
                const { url, title } = iconElement.dataset;
                const iconRect = iconElement.getBoundingClientRect();
                const windowEl = document.createElement('div');
                windowEl.className = 'window';
                windowEl.style.left = `${window.innerWidth / 2 - Math.min(window.innerWidth * 0.4, 600)}px`;
                windowEl.style.top = `${window.innerHeight / 2 - Math.min(window.innerHeight * 0.4, 400)}px`;
                windowEl.style.zIndex = ++highestZIndex;
                windowEl.innerHTML = `
                    <div class="window-header">
                        <div class="window-controls">
                            <span class="control-btn close"></span><span class="control-btn minimize"></span><span class="control-btn maximize"></span>
                        </div>
                        <div class="window-title">${title}</div>
                    </div>
                    <div class="window-body"><iframe src="${url}" loading="lazy" title="${title}"></iframe></div>`;
                document.getElementById('desktop-view').appendChild(windowEl);
                windowEl.style.transformOrigin = `${iconRect.left + iconRect.width / 2}px ${iconRect.top + iconRect.height / 2}px`;
                windowEl.classList.add('opening');
                windowEl.addEventListener('mousedown', () => { windowEl.style.zIndex = ++highestZIndex; });
                windowEl.querySelector('.close').addEventListener('click', e => {
                    e.stopPropagation();
                    windowEl.style.transformOrigin = `${iconRect.left + iconRect.width / 2}px ${iconRect.top + iconRect.height / 2}px`;
                    windowEl.classList.add('closing');
                    windowEl.addEventListener('animationend', () => windowEl.remove(), { once: true });
                });
                windowEl.querySelector('.maximize').addEventListener('click', e => { e.stopPropagation(); window.open(url, '_blank'); });
                makeDraggable(windowEl);
            }, 100);
        }
        
        function openAppView(project) {
            const appView = document.createElement('div');
            appView.className = 'fullscreen-app-view';
            appView.innerHTML = `
                <div class="app-header">
                    <button class="close-app-btn">&lt; Back</button>
                    <div class="app-title">${project.name}</div>
                    <div style="width: 50px;"></div> <!-- Spacer -->
                </div>
                <div class="app-content"><iframe src="${project.url}" title="${project.name}"></iframe></div>`;
            document.querySelector('#mobile-view .iphone-screen').appendChild(appView);

            // Trigger animation
            requestAnimationFrame(() => appView.classList.add('open'));

            appView.querySelector('.close-app-btn').addEventListener('click', () => {
                appView.classList.remove('open');
                appView.addEventListener('transitionend', () => appView.remove(), { once: true });
            });
        }

        function makeDraggable(element) {
            const header = element.querySelector('.window-header');
            let isDragging = false, offsetX, offsetY;
            header.addEventListener('mousedown', e => {
                if (e.target.classList.contains('control-btn')) return;
                isDragging = true;
                offsetX = e.clientX - element.offsetLeft;
                offsetY = e.clientY - element.offsetTop;
                header.style.cursor = 'grabbing';
            });
            document.addEventListener('mousemove', e => {
                if (!isDragging) return;
                element.style.left = `${e.clientX - offsetX}px`;
                element.style.top = `${e.clientY - offsetY}px`;
            });
            document.addEventListener('mouseup', () => { isDragging = false; header.style.cursor = 'move'; });
        }

        function makeIconDraggable(element) {
            let isDragging = false, hasMoved = false, startX, startY;
            element.addEventListener('mousedown', e => {
                if (e.button !== 0) return;
                isDragging = true; hasMoved = false;
                element.classList.remove('dragging');
                startX = e.clientX; startY = e.clientY;
                const rect = element.getBoundingClientRect(), parentRect = element.parentElement.getBoundingClientRect();
                const offsetX = e.clientX - rect.left, offsetY = e.clientY - rect.top;

                function onMouseMove(e) {
                    if (!isDragging) return;
                    if (!hasMoved && (Math.abs(e.clientX - startX) > 5 || Math.abs(e.clientY - startY) > 5)) {
                        hasMoved = true;
                        element.classList.add('dragging');
                        if (element.style.position !== 'absolute') {
                            const currentRect = element.getBoundingClientRect();
                            element.style.position = 'absolute';
                            element.style.left = `${currentRect.left - parentRect.left}px`;
                            element.style.top = `${currentRect.top - parentRect.top}px`;
                            element.style.zIndex = '1000';
                        }
                    }
                    if (hasMoved) {
                        let newLeft = e.clientX - parentRect.left - offsetX;
                        let newTop = e.clientY - parentRect.top - offsetY;
                        newLeft = Math.max(0, Math.min(newLeft, element.parentElement.clientWidth - element.offsetWidth));
                        newTop = Math.max(0, Math.min(newTop, element.parentElement.clientHeight - element.offsetHeight));
                        element.style.left = `${newLeft}px`;
                        element.style.top = `${newTop}px`;
                    }
                }
                function onMouseUp() {
                    document.removeEventListener('mousemove', onMouseMove);
                    document.removeEventListener('mouseup', onMouseUp);
                    if (hasMoved) setTimeout(() => element.classList.remove('dragging'), 0);
                    isDragging = false;
                    element.style.zIndex = '1';
                }
                document.addEventListener('mousemove', onMouseMove);
                document.addEventListener('mouseup', onMouseUp);
            });
        }
        
        function initVeloxiDock() {
            if (typeof Veloxi === 'undefined') { console.error('Veloxi library not found.'); return; }
            const { createApp, Events, Utils } = Veloxi;
            const MacOsDockPlugin = (context) => {
                let items, root;
                context.subscribeToEvents(bus => bus.subscribeToEvent(Events.PointerMoveEvent, e => {
                    if (!root.intersects(e.x, e.y)) {
                        items.forEach(item => item.size.reset()); return;
                    }
                    items.forEach(item => {
                        const progress = Utils.pointToViewProgress({ x: e.x, y: e.y }, item, 150);
                        const scale = Utils.remap(progress, 0, 1, 1, 1.8);
                        item.size.set({ width: 52 * scale, height: 52 * scale });
                    });
                }));
                context.setup(() => {
                    root = context.getView('root');
                    items = context.getViews('item');
                    items.forEach(item => {
                        item.size.setAnimator('dynamic', { friction: 20, tension: 500 });
                        item.origin.set({ x: 0.5, y: 1 });
                    });
                });
            };
            MacOsDockPlugin.pluginName = 'MacOsDock';
            const app = createApp();
            app.addPlugin(MacOsDockPlugin);
            app.run();
        }

        // --- INITIALIZATION & RESPONSIVE HANDLING ---
        initDesktop();
        initMobile();
    });
    </script>

</body>
</html>
